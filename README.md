# مدیریت هزینه‌های سفر گروهی

اپلیکیشن وب مدرن برای مدیریت و تسویه حساب هزینه‌های سفرهای گروهی

## ویژگی‌ها

- ✅ مدیریت مسافران با امکان افزودن عکس پروفایل
- ✅ ثبت هزینه‌ها با پشتیبانی از چهار ارز (تومان، دلار، یورو، پوند)
- ✅ محاسبه هوشمند تسویه حساب با بهینه‌ترین راه‌حل
- ✅ ردیابی پرداخت‌های دستی
- ✅ نمایش خلاصه کامل هزینه‌ها و بدهی‌ها
- ✅ امکان ریست کامل داده‌ها برای سفر جدید
- ✅ طراحی ریسپانسیو و مناسب موبایل
- ✅ رابط کاربری فارسی کامل

## نصب و راه‌اندازی

### پیش‌نیازها

- سرور وب با پشتیبانی از PHP 7.4 یا بالاتر
- MySQL یا MariaDB
- Apache یا Nginx

### مراحل نصب

1. **آپلود فایل‌ها**: تمام فایل‌ها را در دایرکتوری اصلی وب‌سایت آپلود کنید

2. **تنظیم دیتابیس**: 
   - فایل `config/database.php` را ویرایش کنید
   - رمز عبور دیتابیس را در متغیر `DB_PASS` وارد کنید
   - اسکریپت `config/init.sql` را در دیتابیس اجرا کنید

3. **تنظیم مجوزها**:
   ```bash
   chmod 755 api/
   chmod 644 api/*.php
   chmod 644 config/*.php
   ```

4. **تست اپلیکیشن**: به آدرس وب‌سایت مراجعه کنید

### تنظیمات دیتابیس

```php
define('DB_HOST', 'dbs.hamyarsystem.net');
define('DB_NAME', 'athen');
define('DB_USER', 'n8n_user');
define('DB_PASS', 'YOUR_PASSWORD_HERE'); // رمز عبور خود را وارد کنید
define('DB_PORT', 33060);
```

## ساختار فایل‌ها

```
/
├── index.html              # صفحه اصلی
├── js/
│   └── app.js              # منطق اپلیکیشن
├── api/
│   ├── travelers.php       # API مدیریت مسافران
│   ├── expenses.php        # API مدیریت هزینه‌ها
│   ├── manual-payments.php # API پرداخت‌های دستی
│   ├── settlement.php      # API محاسبه تسویه
│   └── reset.php          # API ریست داده‌ها
├── config/
│   ├── database.php       # تنظیمات دیتابیس
│   └── init.sql          # اسکریپت ایجاد جداول
├── .htaccess             # تنظیمات Apache
└── README.md            # راهنمای نصب
```

## API Endpoints

### مسافران
- `GET /api/travelers.php` - دریافت لیست مسافران
- `POST /api/travelers.php` - افزودن مسافر جدید
- `DELETE /api/travelers.php` - حذف مسافر

### هزینه‌ها
- `GET /api/expenses.php` - دریافت لیست هزینه‌ها
- `POST /api/expenses.php` - افزودن هزینه جدید
- `DELETE /api/expenses.php` - حذف هزینه

### پرداخت‌های دستی
- `GET /api/manual-payments.php` - دریافت لیست پرداخت‌ها
- `POST /api/manual-payments.php` - افزودن پرداخت جدید
- `DELETE /api/manual-payments.php` - حذف پرداخت

### تسویه حساب
- `GET /api/settlement.php` - محاسبه و دریافت تسویه حساب

### ریست داده‌ها
- `POST /api/reset.php` - حذف تمام داده‌ها

## امنیت

- تمام ورودی‌ها اعتبارسنجی می‌شوند
- از Prepared Statements برای جلوگیری از SQL Injection استفاده شده
- CORS headers برای امنیت API تنظیم شده
- Security headers در .htaccess اضافه شده

## پشتیبانی

برای گزارش مشکلات یا درخواست ویژگی‌های جدید، لطفاً با تیم توسعه تماس بگیرید.

## لایسنس

این پروژه تحت لایسنس MIT منتشر شده است.